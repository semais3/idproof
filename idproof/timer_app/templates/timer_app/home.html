<!-- timer_app/templates/timer_app/home.html -->
{% extends 'timer_app/base.html' %}
{% load static %}

{% block content %}
    <!-- –ë–∞–Ω–Ω–µ—Ä —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
    <section class="banner">
        <div class="banner-text">
            <p>–¢—ã —Å–æ–∑–¥–∞–µ—à—å<br>–¢—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—à—å<br>–¢—ã –¥–æ–∫–∞–∑—ã–≤–∞–µ—à—å</p>
            <p>IDPROOF - —Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å –Ω–æ–≤–æ–π —ç—Ä—ã</p>
            <button onclick="openRegistrationModal()" class="register-button">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å ID</button>
        </div>
        <div class="banner-character">
            <!-- Character illustration will be added with CSS -->
        </div>
    </section>

    <!-- –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç -->
    <section class="how-it-works" id="register">
        <h2 class="section-title">–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢</h2>
        <div class="steps">
            <div class="step">
                <h3 class="step-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                <div class="registration-form">
                    <div class="form-group">
                        <label>–í–∞—à–µ –∏–º—è</label>
                        <input type="text" value="" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" disabled>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" value="" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email" disabled>
                    </div>
                    <div class="form-group">
                        <label>CAPTCHA</label>
                        <div style="background: #ccc; height: 60px; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #666;">–î–µ–º–æ CAPTCHA</div>
                    </div>
                    <div class="form-group privacy-group">
                        <input type="checkbox" disabled>
                        <label class="privacy-label">
                            –Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
                        </label>
                    </div>
                    <button type="button" class="submit-button" disabled>–ü–æ–ª—É—á–∏—Ç—å ID</button>
                </div>
            </div>
            <div class="step">
                <h3 class="step-title">–í–∞—à ID —Å–æ–∑–¥–∞–Ω</h3>
                <div class="vault-display">
                    <div class="vault-code">HX23P</div>
                    <button class="verify-button" disabled>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                </div>
            </div>
            <div class="step">
                <h3 class="step-title">–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø</h3>
                <div class="public-access">
                    <div class="vault-icon">üîê</div>
                    <div class="access-lines">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- –ó–∞—á–µ–º —Ç–µ–±–µ IDPROOF -->
    <section class="why-idproof" id="about">
        <h2 class="section-title">–ó–ê–ß–ï–ú –¢–ï–ë–ï IDPROOF</h2>
        <div class="benefits">
            <ul>
                <li>‚Ä¢ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–ª–µ–¥</li>
                <li>‚Ä¢ –ê–≤—Ç–æ—Ä—Å—Ç–≤–æ —Ç–≤–æ–µ–≥–æ –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç–∞</li>
                <li>‚Ä¢ –†–∞–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ Stage 2</li>
            </ul>
        </div>
    </section>

    <!-- Registration Modal -->
    <div id="registrationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRegistrationModal()">&times;</span>
            <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ID</h2>
            <form method="post" class="registration-form" id="modalForm">
                {% csrf_token %}
                <div class="form-group">
                    <label for="{{ form.username.id_for_label }}">–í–∞—à–µ –∏–º—è</label>
                    {{ form.username }}
                </div>
                <div class="form-group">
                    <label for="{{ form.email.id_for_label }}">Email</label>
                    {{ form.email }}
                </div>
                <div class="form-group">
                    {{ form.captcha }}
                </div>
                <div class="form-group privacy-group">
                    {{ form.privacy_policy }}
                    <label for="{{ form.privacy_policy.id_for_label }}" class="privacy-label">
                        –Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å <a href="{% url 'policy' %}" target="_blank" class="privacy-link">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                    </label>
                </div>
                <button type="submit" class="submit-button">–ü–æ–ª—É—á–∏—Ç—å ID</button>
            </form>
            {% if form.errors %}
                <div class="errors">
                    {% for field, errors in form.errors.items %}
                        {% for error in errors %}
                            <p class="error">{{ error }}</p>
                        {% endfor %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        function openRegistrationModal() {
            document.getElementById('registrationModal').style.display = 'block';
        }

        function closeRegistrationModal() {
            document.getElementById('registrationModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            var modal = document.getElementById('registrationModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Open modal if there are form errors (server-side validation failed)
        {% if form.errors %}
            openRegistrationModal();
        {% endif %}
    </script>
{% endblock %}
